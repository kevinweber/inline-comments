!function(t,$,n){var i,o="incom_wrapper",e="#"+o,c="body",a="comments-and-form",r="#"+a,s="incom-commentform",u="data-incom",l=u+"-comment",f=[],d="incom-active",m="."+d,p="incom-visible-comment",b="."+p,v="incom-position-",h="incom-bubble",g="."+h,y=h+"-style",w=h+"-static",k="."+w,S=h+"-dynamic",C=h+"-active",T=h+"-link",A="incom-comments-wrapper",x="."+A,I="incom-reply",O="."+I,W="incom-cancel",j="."+W,B="incom-info-icon",D="."+B,N=r+" .comment",_="data_incom",L=0,Q=$(window).width(),q,z,E;t.init=function(t){F(t),G(),xn(),$(O+" .comment-reply-link").on("click",function(){$(r+" #commentform").attr("id",s)})};var F=function(t){i=$.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,alwaysStatic:!1,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white",backgroundOpacity:"1"},t)},G=function(){0===$(e).length&&$('<div id="'+o+'"></div>').appendTo($(c)).addClass(v+i.position),H()},H=function(){var t=On(i.selectors);$(t).each(function(n){$(t[n]).each(function(t){var n=$(this),i=J(n);t=K(t,i),M(t,n,i),P(n)})})},J=function(t){var n=t.prop("tagName").substr(0,5);return n},K=function(t,n){var i=n+t;if(-1!==$.inArray(i,f))for(;-1!==$.inArray(i,f);)t++,i=n+t;return f.push(i),t},M=function(t,n,i){if(!n.attr(u)){var o=i+t;n.attr(u,o)}},P=function(t){var n=R(t),i=V(t),o=$("<a/>",{href:"","class":T}).text(n).wrap(i).parent().appendTo(e);Z(o),dn(t,o),pn(o)?(tn(t,o),nn(t,o)):o.hide()},R=function(t){var n;return n=Y(t)?U(t):i.defaultBubbleText},U=function(t){var n=t.attr(u),i="["+l+"="+n+"]",o=$(i).length;return o+=$(i+" .children li").length},V=function(t){var n='<div class="'+X(t)+'" />';return n},X=function(t){var n=h,o=" ";return(i.alwaysStatic||Y(t)&&i.countStatic)&&(n+=o+w),n+=Y(t)||!Y(t)&&"bubble"===i.bubbleStyle?o+y:o+S},Y=function(t){var n=U(t);return $.isNumeric(n)&&n>0?!0:!1},Z=function(t){t.hasClass(w)&&t.css("display","block")},tn=function(t,n){n.hasClass(w)||t.add(n).hover(function(){$(g+":not("+k+")").hide(),"fadein"===i.bubbleAnimationIn?n.stop(!0,!0).fadeIn():n.stop(!0,!0).show(),pn(n)||n.hide()},function(){"fadeout"===i.bubbleAnimationOut?n.stop(!0,!0).fadeOut():n.stop(!0,!0).delay(700).hide(0)})},nn=function(t,n){n.on("click",function(i){i.preventDefault(),on(),t.addClass(d),wn(),n.addClass(C),an(n)})},on=function(){var t=$(m);0!==t.length&&(t.removeClass(d),0===t.prop("class").length&&t.removeAttr("class"))},en=function(t){var n=parseInt(cn(t).substring(0,2),16),i=parseInt(cn(t).substring(2,4),16),o=parseInt(cn(t).substring(4,6),16);return n+","+i+","+o},cn=function(t){return"#"===t.charAt(0)?t.substring(1,7):t},an=function(t){var n=$("<div/>",{"class":A}).appendTo(e).css("background-color","rgba("+en(i.background)+","+i.backgroundOpacity+")");ln(),sn(),dn(t,n),bn(n),gn(),rn()},rn=function(){$(document).ready(yn()).ajaxStop(function(){yn()})},sn=function(){$(r).appendTo(x).show(),un()},un=function(){var t=$("<input>").attr("type","hidden").attr("name",_).val(fn);$(r+" .form-submit").append($(t))},ln=function(){var t="["+l+"="+fn()+"]";$(N).hide(),$(N+t).addClass(p).show(),$(b+" .children li").show()},fn=function(){var t=$(m).attr(u);return t},dn=function(t,n){var i=t.offset();n.css({top:i.top,left:An()?i.left+t.outerWidth():i.left-n.outerWidth()})},mn=function(t){q=t.outerWidth(),z=t.offset().left,E=z+q},pn=function(t){return mn(t),E>Q||0>z?!1:!0},bn=function(t){mn(t),An()&&E>Q?(vn(E-Q),kn("in")):!An()&&0>z&&(vn(-z),kn("in"))},vn=function(t){L=t},hn=function(){return L},gn=function(){$("html").click(function(t){0===$(t.target).parents(e).length&&wn(!0)})},yn=function(){$(j).click(function(t){t.preventDefault(),wn(!0)})},wn=function(t){var n=$(g),i=$(x);$(r).appendTo(e).hide(),$(b).removeClass(p),n.hasClass(C)&&(n.removeClass(C),t?i.fadeOut("fast",function(){$(this).remove(),on()}):i.remove(),kn("out"))},kn=function(t){var n=$(i.moveSiteSelector);n.css({position:"relative"}),Sn(n,t),i.moveSiteSelector!==c&&(Tn(t,g),Tn(t,x))},Sn=function(t,n){var i;"in"===n?i=hn():"out"===n&&(i="initial"),Cn(t,i)},Cn=function(t,n){t.css(An()?{right:n}:{left:n})},Tn=function(t,n){var i=$(n);"in"===t?i.css({left:An()?"-="+hn():"+="+hn()}):"out"===t&&i.css({left:An()?"+="+hn():"-="+hn()})},An=function(){return"right"===i.position?!0:!1},xn=function(){var t=$(D);if(t.length){t.css({display:"block",visibility:"visible"}),(t.css("opacity")<.2||In(t)<.2)&&t.css({color:"rgba(0,0,0,1)"}).fadeTo("fast",.5);var n=t.css("color");/\s/g.test(n)&&(n=n.replace(/\s/g,"")),n=n.toLowerCase(),("rgb(255,255,255)"===n||"white"===n||"rgba(255,255,255,0)"===n)&&t.css("cssText","color: red!important;")}},In=function(t){var n=1,i=t.css("color");return/rgba/i.test(i)&&(n=i.replace(/^.*,(.+)\)/,"$1")),n},On=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);